# TimeTracker 项目蓝图

## 一、产品定位

TimeTracker 是为**个人时间管理深度用户**打造的 macOS 原生工具，核心解决从 Excel 手工记录到专业化时间追踪的升级需求。产品遵循**"记录优先、分析为辅、极简至上"**的设计哲学。

### 目标用户画像
- **身份**：追求自我管理的个人用户（自由职业者/知识工作者/学生）
- **痛点**：Excel 录入繁琐、数据分析需手动制图、无法快速检索历史记录
- **习惯**：已坚持时间记录 5 年以上，日均记录 30-50 个时间段
- **诉求**：降低录入摩擦力、自动化数据分析、保持数据完全本地化
- **心智模型**：时间是连续流动的，通过"切分"而非"计时"来记录不同活动

### 核心价值主张
1. **3 秒切换法则**：通过"切分器"操作 + 智能补全，单次切换耗时 < 3 秒
2. **时间流隐喻**：时间是一条连续的河流，只需在事项变化时"切一刀"
3. **多维灵活分析**：支持自定义维度标签（领域/项目/质量等），适应人生阶段变化
4. **数据主权**：所有数据存储在本地，支持随时导出为 Excel

---

## 二、核心概念创新

### 2.1 从"计时器"到"切分器"（Time Switch）

**传统计时器的问题**：
- ❌ 秒表跳动制造焦虑
- ❌ 忘记点击"停止"导致数据错误
- ❌ 需要先结束再开始，操作繁琐

**切分器的优势**：
- ✅ 时间默认连续流动，只需在事项切换时操作一次
- ✅ 无心理压力，界面静态展示"当前正在做什么"
- ✅ 一键完成"结束上一个 + 开始新的"

**操作对比**：
```
【传统计时器】
点击"停止"开发 → 点击"开始" → 输入"开会" → 保存
（4 步操作）

【时间切分器】
输入"开会" → 回车
（1 步操作，自动结束"开发"并开始"开会"）
```

### 2.2 多维分类系统（Dynamic Dimensions）

**设计理念**：
不再使用固定的"分类"字段，而是让用户自定义多个维度（Dimension），每个维度下有多个选项（Option）。

**示例场景**：
```
维度1：领域 → [工作, 学习, 生活, 娱乐]
维度2：项目 → [TimeTracker, CRM, 装修, 无]
维度3：质量 → [高效, 正常, 摸鱼]
```

当用户记录"写代码"时，可以标记为：
- 领域：工作
- 项目：TimeTracker
- 质量：高效

**核心优势**：
1. **灵活扩展**：未来想加"地点"、"心情"等维度，无需改代码
2. **阶段适配**：备考期间可以加"科目"维度，考完后禁用（历史数据保留）
3. **深度分析**：可以按任意维度组合进行数据分析

### 2.3 时间连续性保障

**核心原则**：时间是绝对连续的，不允许出现"空白时段"（除非主动修正）。

**连续性示例**：
```
09:00 - 10:30  写代码 [工作]
10:30 - 11:00  喝咖啡 [生活日常]  ← 自动继承上一条的结束时间
11:00 - 12:30  开会 [工作]
```

**Gap（空洞）产生场景**：
只有在修正历史记录时才会出现空洞：
```
用户操作：把"写代码"的结束时间从 11:00 改成 10:30
系统反馈：10:30 - 11:00 出现空白，高亮提示用户补录
```

---

## 三、功能模块架构

### 3.1 核心功能模块（MVP 必做）

```
TimeTracker V3.0
│
├── 1. 数据录入模块 ⭐⭐⭐⭐⭐
│   ├── 1.1 时间切分器（核心）
│   │   ├── "当前状态"展示（正在做什么 + 已持续时长）
│   │   ├── 快速切换输入框（输入新事项 + 回车）
│   │   └── 智能默认（基于事项名称回填维度选项）
│   ├── 1.2 时间流列表
│   │   ├── 今日记录展示（时间轴样式，从上到下）
│   │   ├── Gap 空洞高亮提示
│   │   └── 快速编辑/删除/补录操作
│   └── 1.3 多维标签选择器
│       ├── 展示所有已启用的维度
│       ├── 键盘快速选择（数字键/方向键）
│       └── 历史智能推荐（基于事项名称）
│
├── 2. 数据分析模块 ⭐⭐⭐⭐
│   ├── 2.1 多维度统计报表
│   │   ├── 时间维度切换（日/周/月/年）
│   │   ├── 按任意维度聚合统计
│   │   └── 维度交叉分析（如："工作"中各"项目"的时长）
│   ├── 2.2 可视化图表
│   │   ├── 维度时长趋势曲线（折线图）
│   │   ├── 每日维度分布（堆叠柱状图）
│   │   └── 维度占比分析（饼图/环形图）
│   └── 2.3 灵活筛选器
│       ├── 日期范围选择
│       ├── 多维度组合过滤
│       └── 事项关键词搜索
│
├── 3. 数据管理模块 ⭐⭐⭐
│   ├── 3.1 维度配置管理（核心新增）
│   │   ├── 新增/编辑/删除维度
│   │   ├── 维度下的选项管理（增删改）
│   │   ├── 维度启用/禁用开关
│   │   └── 选项颜色自定义
│   ├── 3.2 Excel 导入
│   │   ├── 解析现有 timetable.xlsx
│   │   ├── 智能映射分类到维度
│   │   └── 数据校验与错误提示
│   └── 3.3 Excel 导出
│       ├── 按日期范围导出
│       ├── 维度展开为多列
│       └── 保持与原 Excel 兼容
│
└── 4. 应用设置模块 ⭐⭐
    ├── 4.1 基础设置
    │   ├── 数据库文件路径显示
    │   ├── 默认维度配置
    │   └── 应用版本信息
    └── 4.2 外观设置（可选）
        └── 主题切换（浅色/深色）
```

### 3.2 功能优先级说明

| 优先级 | 模块 | 理由 |
|--------|------|------|
| P0 | 时间切分器 | 核心操作，直接影响使用频率 |
| P0 | 多维标签选择 | 灵活性基础，适应需求变化 |
| P0 | 维度配置管理 | 支撑多维标签的元数据管理 |
| P0 | Excel 导出 | 数据备份与安全性保障 |
| P1 | 数据分析 | 价值体现，但记录优先 |
| P1 | Excel 导入 | 迁移历史数据的必要功能 |
| P2 | 外观设置 | 锦上添花，不影响核心功能 |

---

## 四、核心交互流程

### 4.1 实时切分流程（The Switch Flow）

**场景**：用户正在写代码，突然要去开会。

```
【用户视角】
┌─────────────────────────────────────────┐
│ 正在进行：TimeTracker 开发               │
│ 已持续：1h 23m                           │
│                                         │
│ [接下来要做什么？_____]  ← 输入框焦点    │
└─────────────────────────────────────────┘

步骤1：输入"开会"
步骤2：回车（或 Cmd+Enter）

【系统动作】
1. 结束"TimeTracker 开发"，结束时间 = 当前时刻
2. 弹出维度选择器（如果事项名称有历史记录，自动回填）
3. 用户确认或修改维度选项
4. 保存新记录"开会"，开始时间 = 刚才的结束时间
5. 界面更新为"正在进行：开会"

【耗时】< 3 秒（如果选项都对，只需回车两次）
```

### 4.2 智能默认逻辑

**核心设计**：基于事项名称记忆维度选项。

**示例场景**：
```
第1次录入"写代码"：
- 用户手动选择：[领域=工作, 项目=TimeTracker, 质量=高效]

第2次录入"写代码"：
- 系统自动回填：[领域=工作, 项目=TimeTracker, 质量=高效]
- 用户只需回车确认（或修改不对的选项）
```

**匹配逻辑**：
1. 精确匹配：如果输入"写代码"，查找历史中最近一次"写代码"的维度选项
2. 模糊匹配：如果输入"写代"，显示候选列表"写代码"、"写文档"
3. 新事项：如果是新输入，使用上一条记录的维度选项作为默认

### 4.3 事后补录流程（The Gap Fill Flow）

**场景**：用户忘了记录，修正历史后出现空洞。

```
【时间轴展示】
09:00 - 10:00  写代码 [工作]
🚫 10:00 - 12:00 (2小时未记录)  ← 红色高亮
12:00 - 13:00  吃饭 [生活]

【操作流程】
1. 点击红色空洞区域
2. 弹出快速填补弹窗："这段时间你在做什么？"
3. 输入事项名称（如"开会"）
4. 选择维度选项
5. 保存，空洞消失
```

**或者支持自然语言回溯**：
```
在输入框输入：-2h 午睡
系统理解为：从当前时间往前倒推2小时，记录为"午睡"
```

---

## 五、数据模型设计

### 5.1 核心数据表

#### 表1：维度配置表 (dimensions)
| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| id | INTEGER | 主键 | 1 |
| name | TEXT | 维度名称 | 领域 |
| is_active | BOOLEAN | 是否启用 | true |
| order | INTEGER | 排序权重 | 1 |
| created_at | DATETIME | 创建时间 | 2026-01-03 |

#### 表2：维度选项表 (dimension_options)
| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| id | INTEGER | 主键 | 101 |
| dimension_id | INTEGER | 所属维度（外键） | 1 |
| name | TEXT | 选项名称 | 工作 |
| color | TEXT | 显示颜色 | #3B82F6 |
| order | INTEGER | 排序权重 | 1 |

#### 表3：时间记录表 (time_entries)
| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| id | INTEGER | 主键 | 1 |
| title | TEXT | 事项名称 | 写代码 |
| start_time | TEXT | 开始时间（ISO 8601 格式） | 2026-01-03T09:00:15 |
| end_time | TEXT | 结束时间（可为空） | 2026-01-03T10:30:45 |
| duration_seconds | INTEGER | 时长（秒） | 5430 |
| description | TEXT | 备注（可选） | 完成登录模块 |
| created_at | TEXT | 创建时间 | 2026-01-03T10:30:45 |

**设计说明**：
- **时间格式**：采用 ISO 8601 标准（TEXT 类型），精确到秒（如 `2026-01-03T09:00:15`），兼顾可读性与精度
- **时长精度**：使用秒级存储（如 90.5 分钟 = 5430 秒），避免精度丢失
- **正在进行**：`end_time` 为 NULL 表示"正在进行中"

#### 表4：记录-选项关联表 (entry_attributes)
| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| id | INTEGER | 主键 | 1 |
| entry_id | INTEGER | 关联记录（外键） | 1 |
| option_id | INTEGER | 关联选项（外键） | 101 |
| created_at | TEXT | 创建时间 | 2026-01-03T10:30:45 |

**设计说明**：
- 不存储 `dimension_id`，通过 `option_id` 关联到 `dimension_options` 表即可查到所属维度
- 一条时间记录可以关联多个选项（跨多个维度）
- **更新策略**：编辑记录的维度选项时，采用"先删后插"方案（在事务中删除该记录的所有旧关联，再批量插入新关联），逻辑简单且数据一致性有保障

### 5.2 数据关系图

```
┌─────────────────┐
│  dimensions     │
│  (维度配置)      │
└────────┬────────┘
         │ 1:N
         ↓
┌─────────────────┐
│dimension_options│ ←───────┐
│  (维度选项)      │         │
└─────────────────┘         │ N:1
                            │
┌─────────────────┐    ┌────┴──────────┐
│  time_entries   │    │entry_attributes│
│  (时间记录)      │←───│  (关联表)      │
└─────────────────┘ 1:N└───────────────┘
```

### 5.3 查询示例

**查询某条记录的所有维度标签**：
```sql
SELECT 
  d.name AS dimension_name,
  o.name AS option_name,
  o.color
FROM entry_attributes ea
JOIN dimension_options o ON ea.option_id = o.id
JOIN dimensions d ON o.dimension_id = d.id
WHERE ea.entry_id = 1;
```

结果：
| dimension_name | option_name | color |
|----------------|-------------|-------|
| 领域 | 工作 | #3B82F6 |
| 项目 | TimeTracker | #10B981 |
| 质量 | 高效 | #F59E0B |

**更新记录的维度选项（先删后插）**：
```sql
-- 在事务中执行
BEGIN TRANSACTION;

-- 1. 删除旧关联
DELETE FROM entry_attributes WHERE entry_id = ?;

-- 2. 插入新关联
INSERT INTO entry_attributes (entry_id, option_id) 
VALUES (?, ?), (?, ?), (?, ?);

COMMIT;
```

---

## 六、用户界面草图（概念示意）

### 6.1 主界面布局（V3.0 切分器模式）

```
┌────────────────────────────────────────────────────────┐
│ TimeTracker             📊 分析   ⚙️ 设置   [ - □ × ] │
├────────────────────────────────────────────────────────┤
│                                                        │
│  ┌──────────────────────────────────────────────┐    │
│  │  正在进行：TimeTracker 开发                   │    │
│  │  已持续：1h 23m    [领域:工作 项目:TT 质量:高效] │    │
│  └──────────────────────────────────────────────┘    │
│                                                        │
│  ┌──────────────────────────────────────────────┐    │
│  │ [接下来要做什么？_________________]   (Cmd+K) │    │
│  └──────────────────────────────────────────────┘    │
│                                                        │
│  ─────────────────────────────────────────────────    │
│                                                        │
│  📅 今日记录 (2026-01-03)         [ < 今日 > ]        │
│                                                        │
│  ┌──────────────────────────────────────────────┐    │
│  │ 10:30 - Now    TimeTracker 开发    1h 23m    │    │
│  │ [工作 | TimeTracker | 高效]      [✏️] [🗑️]   │    │
│  ├──────────────────────────────────────────────┤    │
│  │ 09:00 - 10:30  需求评审            1h 30m    │    │
│  │ [工作 | CRM | 一般]               [✏️] [🗑️]   │    │
│  ├──────────────────────────────────────────────┤    │
│  │ 🚫 08:00 - 09:00 (1小时未记录) [点击补录]    │    │
│  ├──────────────────────────────────────────────┤    │
│  │ 07:00 - 08:00  早餐+通勤         1h 00m      │    │
│  │ [生活日常]                        [✏️] [🗑️]   │    │
│  └──────────────────────────────────────────────┘    │
│                                                        │
│  [ + 手动补录时间段 ]                                  │
│                                                        │
└────────────────────────────────────────────────────────┘
```

### 6.2 维度选择器（弹窗）

当用户输入事项名称回车后，弹出：

```
┌────────────────────────────────────┐
│ 为 "开会" 选择标签                  │
├────────────────────────────────────┤
│ 领域 (必选):                        │
│  ● 工作  ○ 学习  ○ 生活  ○ 娱乐   │
│                                    │
│ 项目 (可选):                        │
│  ○ TimeTracker  ● CRM  ○ 无       │
│                                    │
│ 质量 (可选):                        │
│  ○ 高效  ● 正常  ○ 摸鱼            │
│                                    │
│  💡 根据历史记录自动填充            │
│                                    │
│  [ 取消 ]         [ 确认 (Enter) ] │
└────────────────────────────────────┘
```

**键盘操作**：
- `Tab` 切换维度
- `1/2/3` 数字键快速选择选项
- `Enter` 确认保存

### 6.3 维度管理界面（设置页面）

```
┌────────────────────────────────────────────────────────┐
│ ⚙️ 设置 > 维度管理                                       │
├────────────────────────────────────────────────────────┤
│                                                        │
│  已启用维度                              [ + 新增维度 ] │
│  ┌──────────────────────────────────────────────┐    │
│  │ 📊 领域                    [↑] [↓] [✏️] [🗑️]  │    │
│  │   ├─ 工作 (#3B82F6)                          │    │
│  │   ├─ 学习 (#10B981)                          │    │
│  │   ├─ 生活 (#F59E0B)                          │    │
│  │   └─ 娱乐 (#EC4899)           [+ 添加选项]   │    │
│  ├──────────────────────────────────────────────┤    │
│  │ 📁 项目                    [↑] [↓] [✏️] [🗑️]  │    │
│  │   ├─ TimeTracker (#6366F1)                   │    │
│  │   ├─ CRM (#8B5CF6)                           │    │
│  │   └─ 无 (#94A3B8)             [+ 添加选项]   │    │
│  ├──────────────────────────────────────────────┤    │
│  │ ⭐ 质量                    [↑] [↓] [✏️] [🗑️]  │    │
│  │   ├─ 高效 (#22C55E)                          │    │
│  │   ├─ 正常 (#A3A3A3)                          │    │
│  │   └─ 摸鱼 (#EF4444)           [+ 添加选项]   │    │
│  └──────────────────────────────────────────────┘    │
│                                                        │
│  已禁用维度                                             │
│  ┌──────────────────────────────────────────────┐    │
│  │ 🎓 备考科目 (禁用于 2025-12-01)  [启用] [删除] │    │
│  └──────────────────────────────────────────────┘    │
│                                                        │
└────────────────────────────────────────────────────────┘
```

---

## 七、MVP 范围界定

### 7.1 第一版必做功能（V3.0 MVP）

| 功能模块 | 核心功能点 | 是否必做 | 变更说明 |
|---------|-----------|---------|---------|
| **录入模块** | 时间切分器（Switch 模式） | ✅ 必做 | **V3 新增** |
| | "当前正在进行"状态展示 | ✅ 必做 | **V3 新增** |
| | 多维标签选择器 | ✅ 必做 | **V3 新增** |
| | 基于事项名称的智能默认 | ✅ 必做 | **V3 新增** |
| | Gap 空洞检测与补录 | ✅ 必做 | **V3 新增** |
| | 时间流列表展示 | ✅ 必做 | 升级自 V2 |
| | 编辑/删除记录 | ✅ 必做 | 保留 V1 |
| **维度管理** | 维度配置（增删改、启用/禁用） | ✅ 必做 | **V3 新增** |
| | 维度选项管理（增删改、颜色） | ✅ 必做 | **V3 新增** |
| **分析模块** | 时间维度切换（日/周/月） | ✅ 必做 | 保留 V1 |
| | 多维度聚合统计 | ✅ 必做 | **V3 升级** |
| | 维度趋势曲线图 | ✅ 必做 | **V3 升级** |
| | 维度占比环形图 | ✅ 必做 | **V3 升级** |
| **数据管理** | Excel 导出（多维度展开） | ✅ 必做 | **V3 升级** |
| | Excel 导入（智能映射维度） | ⚠️ P1 | 需考虑旧数据兼容 |
| **基础设施** | SQLite 数据库（多表设计） | ✅ 必做 | **V3 升级** |
| | Electron 窗口管理 | ✅ 必做 | 保留 V1 |

**❌ 移除功能（相比 V2）**：
- 圆形计时器（Timer）
- 倒计时动画
- 秒级实时刷新

---

### 7.2 第二版优化功能（迭代方向）

| 功能模块 | 功能点 | 价值 |
|---------|-------|------|
| **录入增强** | 全局快捷键唤醒（Cmd+Shift+T） | 提升录入便捷性 |
| | 自然语言输入解析（"-2h 午睡"） | 极致简化补录 |
| | 维度选项快速切换（数字键 1-9） | 减少鼠标操作 |
| **分析增强** | 维度交叉分析（如："工作"下各项目占比） | 深度洞察 |
| | 事项时长排行 Top 10 | 发现时间黑洞 |
| | 数据下钻交互（点击维度展开详情） | 交互式探索 |
| **智能化** | 维度选项智能推荐（基于时间段/上下文） | AI 辅助决策 |
| | 异常时间段提醒（如：连续 8 小时同一事项） | 健康提示 |

---

### 7.3 暂不考虑功能（边界明确）

| 功能 | 不做原因 |
|------|---------|
| 云同步 | 违背"本地至上"原则 |
| 移动端应用 | 用户主要在 macOS 使用 |
| 团队协作 | 个人工具，无协作需求 |
| 秒表/倒计时 | 与"时间流"隐喻冲突 |
| AI 自动分类 | 用户有清晰的分类体系，不需要黑盒 |
| 日历视图 | 时间轴已足够，避免功能堆砌 |

---

## 八、核心技术方案

### 8.1 数据流架构

```
┌──────────────────────────────────────────────┐
│          React UI Layer (Renderer)           │
│  ┌────────┐  ┌────────┐  ┌────────┐          │
│  │ 录入页面│  │ 分析页面│  │ 设置页面│          │
│  └───┬────┘  └───┬────┘  └───┬────┘          │
│      │           │           │               │
│      └───────────┴───────────┘               │
│                  │                            │
│         ┌────────▼────────┐                  │
│         │  Zustand Store  │                  │
│         │  (状态管理)      │                  │
│         └────────┬────────┘                  │
└──────────────────┼───────────────────────────┘
                   │ IPC 通信
┌──────────────────▼───────────────────────────┐
│         Electron Main Process                │
│  ┌─────────────────────────────────────┐     │
│  │     Database Service (SQLite)       │     │
│  │  ┌──────────┐  ┌──────────┐         │     │
│  │  │dimensions│  │  options  │         │     │
│  │  └────┬─────┘  └─────┬────┘         │     │
│  │       │              │               │     │
│  │  ┌────┴──────┐  ┌────┴──────┐       │     │
│  │  │time_entries│  │entry_attrs│       │     │
│  │  └───────────┘  └───────────┘       │     │
│  └─────────────────────────────────────┘     │
│  ┌─────────────────────────────────────┐     │
│  │     Excel Service (exceljs)         │     │
│  └─────────────────────────────────────┘     │
└──────────────────────────────────────────────┘
```

### 8.2 关键技术决策

| 技术点 | 方案选择 | 理由 |
|--------|---------|------|
| 数据库引擎 | better-sqlite3 | 同步 API 性能优于异步版本，简化逻辑 |
| 状态管理 | Zustand | 轻量级，学习成本低，足够满足需求 |
| 图表库 | Recharts | React 生态兼容好，声明式 API 易用 |
| 日期处理 | date-fns | 轻量且 Tree-shakable，优于 moment.js |
| Excel 处理 | exceljs | 支持完整的 .xlsx 读写，社区活跃 |
| 路由方案 | React Router v6 | 标准方案，文档完善 |

### 8.3 性能优化策略

1. **数据库层**
   - 为常用查询字段（日期、维度选项）建立索引
   - 使用批量插入优化导入性能
   - 查询结果缓存（按日期缓存统计数据）

2. **渲染层**
   - 列表虚拟滚动（react-window）处理大数据量
   - 图表组件按需加载（React.lazy）
   - 防抖优化搜索输入（debounce 300ms）

3. **启动优化**
   - 窗口预加载策略（隐藏窗口预热）
   - 数据库连接池复用
   - 首屏只加载必要数据（懒加载历史记录）

---

## 九、成功指标

### 产品成功标准（使用 3 个月后评估）

1. **录入效率**
   - ✅ 单次切换平均耗时 < 3 秒（含思考时间）
   - ✅ 键盘操作占比 > 90%（减少鼠标依赖）

2. **数据完整性**
   - ✅ 日均记录数保持在 30-50 条（与 Excel 时期持平）
   - ✅ Gap 空洞率 < 5%（说明切换及时）

3. **使用粘性**
   - ✅ 每日打开应用 > 5 次（高频切换）
   - ✅ 使用分析功能频率 > 每周 2 次

4. **性能表现**
   - ✅ 应用冷启动时间 < 2 秒
   - ✅ 数据库查询响应 < 100ms
   - ✅ 图表渲染时间 < 500ms

5. **灵活性验证**
   - ✅ 用户至少创建 2 个以上自定义维度
   - ✅ 维度禁用后能正常查看历史数据

---

## 十、风险与缓解措施

| 风险点 | 影响 | 缓解措施 |
|--------|------|---------|
| 多维标签选择流程过长 | 影响录入速度 | 1. 智能默认减少选择次数<br>2. 支持快捷键快速选择<br>3. 允许"稍后标记" |
| 旧数据迁移复杂 | Excel 导入失败 | 1. 提供维度映射配置界面<br>2. 支持分批导入<br>3. 保留原 Excel 文件不做修改 |
| 用户理解"时间流"概念困难 | 学习成本高 | 1. 首次使用引导动画<br>2. 提供示例演示视频<br>3. FAQ 常见问题解答 |
| Gap 空洞过多影响体验 | 用户焦虑 | 1. 提供"批量补录"功能<br>2. 允许"合并为生活日常"快捷操作 |

---

## 十一、下一步行动

1. **确认设计方案**（当前阶段） ✅
   - ✅ 确认"时间切分器"概念
   - ✅ 确认多维分类系统设计
   - ✅ 确认时间连续性原则

2. **输出详细需求文档**（进行中）
   - 更新 `mvp-time-entry.md`（核心录入流程）
   - 更新 `mvp-data-management.md`（维度配置管理）
   - 更新 `mvp-data-analysis.md`（多维度分析）

3. **数据库设计**
   - 编写 SQL Schema（4 张核心表）
   - 设计索引策略
   - 数据迁移方案

4. **技术实施**
   - 重构录入模块（移除 Timer 逻辑）
   - 实现维度配置管理界面
   - 适配分析模块支持多维度

5. **测试与优化**
   - 功能测试（覆盖核心流程）
   - 性能测试（大数据量场景）
   - 用户体验优化（基于真实使用反馈）

---

**文档版本**：v3.0
**创建日期**：2026-01-02
**最后更新**：2026-01-03
**核心变更**：从"计时器"升级为"切分器"，引入多维分类系统
**待确认事项**：无（已与用户达成共识）
